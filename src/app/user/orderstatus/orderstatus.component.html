<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" integrity="sha512-iBBXm8fW90+nuLcSKlbmrPcLa0OT92xO1BIsZ+ywDWZCvqsWgccV3gFoRBv0z+8dLJgyAHIhR35VZc2oM/gI1w==" crossorigin="anonymous" referrerpolicy="no-referrer" />
<link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&display=swap" rel="stylesheet">

<main>
    <app-navbar></app-navbar>

    <div class="container-fluid">
        <div class="row">
            <div class="col-md-10 col-11 mx-auto">
                <div class="row mt-5 gx-3">
                    <!----left side div-->
                    <div class="col-md-12 col-lg-2 col-sm-5 mx-auto left_div mb-lg-0 mb-5">
                        <app-sidemenu></app-sidemenu>
                    </div>

                    <!-- right -->
                    <div class="col-md-12 col-lg-10 col-sm-7 mx-auto mt-lg-0 mt-md-5">
                        <div class="title">
                            <h1>My Orders</h1>
                        </div>
                        <!-- <div *ngFor="let trans of transactions">
                            <div class="row justify-content-between" *ngIf="user.user_id == trans.user_id && trans.deliver_st == 0"> -->
                              <div *ngFor="let trans of transactions">

                                <div *ngIf="user.user_id == trans.user_id && trans.deliver_st == 0">
                                <div class="right_side p-4 shadow bg-white mb-3" >

                                    <div class="headers">
                                        <div class="d-inline orderid_orderedon">
                                            <p class="text-muted"> Order ID <span class="font-weight-bold text-dark">{{ trans.transaction_no}}</span></p>
                                        </div>
                                        <div class="d-inline orderid_orderedon">
                                            <p class="text-muted"> Ordered On <span class="font-weight-bold text-dark">{{ trans.checkout_time | date:'longDate'}}  </span> </p>
                                        </div>
                                    </div>
                                    <hr>
                                    <p class="text-muted">Tracking Status on: <span class="Today">11:30pm, Today</span></p><button type="button" class="btn btn-outline-primary d-flex">GearUp Warehouse, Olongapo City</button>
                                    <div class="row justify-content-center">
                                        <div class="col-11 col-sm-9 col-md-7 col-lg-6 col-xl-5 text-center p-0 mt-3 mb-2">
                                            <div class="card px-0 pt-4 pb-0 mt-3 mb-3">
                                                <ul id="progressbar">
                                                    <li class="active" id="placed"><strong>Placed</strong></li>
                                                    <li class="active" id="shipped"><strong>Shipped</strong></li>
                                                    <li id="delivered"><strong>Delivered</strong></li>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                    <hr>
                                    <div class="contents">
                                        <ul class="list-group list-group-flush"  >
                                          <div *ngFor="let order of orders">
                                            <li class="list-group-item row" *ngIf="order.transaction_no == trans.transaction_no">
                                                <div class="row" >
                                                    <!-- thumbnail -->
                                                    <div class="col-md-2 col-6 mx-auto bg-white
                                                d-flex justify-content-center align-items-center product_img">
                                                    <img src={{order.product_img}}  alt="item" style="width: 100px;">
                                                </div>
                                                    <!-- cart product details -->
                                                    <div class="col-md-10 col-12 mx-auto px-4">
                                                        <div class="row">
                                                            <!-- item name -->
                                                            <div class="col-12">
                                                                <h4 class="item_name">{{order.product_name}} </h4>
                                                                <small class="item_desc">{{order.product_desc}}</small>
                                                            </div>
                                                        </div>
                                                        <!-- remove, move & price -->
                                                        <div class="row">
                                                            <div class="col-12 d-flex justify-content-between remove_move">
                                                                <small class="item_quantity">Quantity: {{order.qty}}</small>
                                                                <small class="item_price"><span class="mt-5">&#8369;</span> {{order.qty * order.price}} <span class="small text-muted"> via Google Pay </span></small>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </li>
                                          </div>

                                          <!-- Modal Rating -->
                                        <!--Modal for tracking-->
                                        <ng-template #content let-c="close" let-d="dismiss">
                                          <div class="modal-header">
                                          <!-- <h4 class="modal-title" id="modal-basic-title">Order Status</h4> -->
                                          <h4 class="modal-title" id="modal-basic-title">Rate our Gears</h4>
                                          <button type="button" class="close" aria-label="Close" (click)="d('Cross click')">
                                              <span aria-hidden="true">&times;</span>
                                          </button>
                                          </div>
                                          <div class="modal-body">

                                            <div *ngFor="let order of orders">
                                              <div *ngIf="order.transaction_no == trans.transaction_no">
                                                <div class="media-body">
                                                    <h5 class="bold">{{order.product_name}} </h5>
                                                    <p class="text-muted"> Qt:{{order.qty}}</p>
                                                    <h4 class="mt-3 mb-4 bold"> <span class="mt-5">&#8369;</span> {{order.qty * order.price}} <span class="small text-muted"> via Google Pay </span></h4>

                                                </div><img class="align-self-center img-fluid" src={{order.product_img}} width="180 " height="180">
                                                <ng-template #t let-fill="fill">
                                                  <span class="star" [class.full]="fill === 100">
                                                    <span class="half" [style.width.%]="fill">&#9733;</span>&#9733;
                                                  </span>
                                                </ng-template>

                                                <ngb-rating [(rate)]="order.rating" (click)="oldrate(order.rating)" (rateChange)="rate(order)"  [starTemplate]="t"  [max]="5"></ngb-rating>

                                                <hr>
                                                </div>
                                              </div>



                                          <!--ORDER STATUS-->

                                          <!-- <app-orderstat></app-orderstat> -->

                                          <!--ORDER STATUS ENDS HERE-->
                                          </div>
                                          <div class="modal-footer">
                                          <button  type="button" class="btn mb-3 btn-outline-dark " (click)="endTransact(trans.transaction_no)" (click)="d('Cross click')">Finish Transaction</button>
                                          </div>
                                      </ng-template>
                                      <!--Modal for tracking-->
                                      <!-- Modal Rating -->
                                            <hr>
                                        </ul>
                                        <div class="price_status">
                                            <div class="row justify-content-end">
                                                <div class="col-6 status">
                                                    <div class="row lower">
                                                        <div class="col text-left">Subtotal</div>
                                                        <div class="col text-right"><span>&#8369;</span>{{trans.payment - 100}}.00</div>
                                                    </div>
                                                    <div class="row lower">
                                                        <div class="col text-left">Delivery</div>
                                                        <div class="col text-right"><span>&#8369;</span>100</div>
                                                    </div>
                                                    <div class="row lower">
                                                        <div class="col text-left"><b>Total to pay</b></div>
                                                        <div class="col text-right text-primary"><span>&#8369;</span><b>{{trans.payment}}.00</b></div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="card-footer bg-white px-sm-3 pt-sm-4 px-0">
                                      <div class="row text-center ">
                                          <div class="col my-auto ">
                                              <h5 (click)="open(content)">Received</h5>
                                          </div>
                                          <div class="col my-auto ">
                                              <h5 class="text-danger">Cancel</h5>
                                          </div>
                                          <!-- <div class="col my-auto mx-0 px-0 "><img class="img-fluid cursor-pointer" src="https://img.icons8.com/ios/50/000000/menu-2.png" width="30" height="30"></div> -->
                                      </div>
                                  </div>
                                </div>
                              </div>
                              </div>
                            <!-- </div>
                        </div> -->

                        </div>


                </div>
            </div><!--end of col 1-->
        </div>
    </div>

    <app-footer></app-footer>
    </main>
